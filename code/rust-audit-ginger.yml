settings:
  name: audit check performs an audit for crates with security vulnerabilities.
  image: rust
  files: true
  author:
  - https://github.com/rustsec
  example: satori run satori://code/rust-audit-ginger.yml --output

install:
  - apt install -qqy pkg-config libssl-dev
  - cargo install cargo-geiger cargo-audit >> /dev/null
   
cargo-audit:
  assertStdoutNotContains:
  - Severity
  - advisories
  setSeverity: 4
  run:
  - cargo audit | tee audit.txt

cargo-geiger:
  assertStdoutNotContains: "!  â”‚"
  setSeverity: 4
  run:
  - cargo geiger | tee geiger.txt

rm:
- rm -fr target/
