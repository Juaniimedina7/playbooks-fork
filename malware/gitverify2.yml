settings:
  image: ubuntu
  name: Verify the score of a Github repository
  example: satori run satori://malware/gitverify2.yml -d REPO="https://github.com/repo" --output

install:
  update:
  - apt update
  dependencies:
  - apt install -qy git jq python3 python3-pip
  gitverify:
  - git clone https://github.com/kulkansecurity/gitverify.git
  requirements:
  - pip install -r gitverify/requirements.txt

test:
  assertStdoutNotContains: "-"
  gitverify:
  - "python3 gitverify/gitverify.py -r ${{REPO}} -f json | grep -A 9999 '^\\[' | jq '.[] | .scoring.positive_score - .scoring.negative_score'"
